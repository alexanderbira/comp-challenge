{"version":3,"file":"static/js/351.12e9c4ad.chunk.js","mappings":"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","sources":["webpack://comp-challenge/./src/3D/Extension.module.css?3d43","3D/Extension.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"dropdown\":\"Extension_dropdown__qrU1S\"};","import React from \"react\";\n\nimport Plotly from \"plotly.js/dist/plotly\";\nimport * as d3 from \"d3\";\n\nimport extensionStyles from \"./Extension.module.css\";\n\nconst axesLabels = {\n  P: \"Pressure (hPa)\",\n  T: \"Temperature (C)\",\n  L: \"Lapse rate (ºK/m)\",\n  Tboil: \"Boiling Point (ºC)\",\n  Tdew: \"Dew Point (ºC)\",\n};\n\nexport default function Extension() {\n  const [varToPlot, setVarToPlot] = React.useState(\"P\");\n\n  const T0 = 15;\n  const Tstar = 100;\n  const P0 = 1013.25;\n  const Pstar = P0;\n  const Md = 0.02896;\n  const Mv = 0.01802;\n  const R = 8.314;\n  const g = 9.8076;\n  const deltaHv = 2_501_000;\n  const cpd = 1003.5;\n  const Rsd = 287;\n  const Rsw = 461.5;\n  const a = 17.625;\n  const b = 243.04;\n  const deltaH = 45.07 * 1000;\n\n  React.useEffect(() => {\n    const zData = [];\n\n    for (let U = 0; U <= 1; U += 0.01) {\n      //T by default in celsius\n      const pressures = [];\n\n      const deltah = 100;\n      let L;\n      let T = T0;\n      let P = P0;\n      for (let h = deltah; h <= 11000; h += deltah) {\n        const Es = 6.1121 * Math.exp((18.678 - T / 234.5) * (T / (T + 257.14)));\n\n        const r = (Rsd / Rsw) * ((U * Es) / (P - U * Es));\n\n        L =\n          g *\n          ((1 + (r * deltaHv) / (Rsd * (T + 273))) /\n            (cpd + (deltaHv ** 2 * r) / (Rsw * (T + 273) ** 2)));\n\n        const deltaP =\n          -((Md * g) / (R * (T + 273))) *\n          (P - U * (1 - Mv / Md) * Es * T) *\n          deltah;\n\n        P += deltaP;\n\n        const Tboil =\n          1 / (1 / (Tstar + 273) - (R / deltaH) * Math.log(P / Pstar)) - 273;\n\n        const Tdew =\n          (b * (Math.log(U) + (a * T) / (b + T))) /\n          (a - Math.log(U) - (a * T) / (b + T));\n\n        T -= L * deltah;\n\n        switch (varToPlot) {\n          case \"P\":\n            pressures.push(P);\n            break;\n          case \"T\":\n            pressures.push(T);\n            break;\n          case \"L\":\n            pressures.push(L * 1000);\n            break;\n          case \"Tboil\":\n            pressures.push(Tboil);\n            break;\n          case \"Tdew\":\n            pressures.push(Tdew);\n            break;\n          default:\n            pressures.push(P);\n            break;\n        }\n      }\n      zData.push(pressures);\n    }\n\n    const x = Array(zData.length)\n      .fill(0)\n      .map((_, i) => i * 0.01);\n\n    const y = Array(zData[0].length)\n      .fill(0)\n      .map((_, i) => i * 100);\n\n    // fill in 'text' array for hover\n    var text = x.map((xi, i) =>\n      y.map(\n        (yi, j) =>\n          `Relative Humidity: ${d3.format(\".2f\")(\n            xi\n          )}<br>Altitude (m): ${yi}<br>${axesLabels[varToPlot]}: ${d3.format(\n            \".4f\"\n          )(zData[i][j])}`\n      )\n    );\n\n    const data = [\n      {\n        z: zData,\n        x: y,\n        y: x,\n        type: \"surface\",\n        text: text,\n        hoverinfo: \"text\",\n        showlegend: false,\n      },\n    ];\n\n    const layout = {\n      title: `${axesLabels[varToPlot]} against Altitude and Relative Humidity`,\n      font: {\n        size: 9,\n      },\n      autosize: true,\n      width: Math.min(700, window.innerWidth) - 100,\n      height: Math.min(700, window.innerWidth) - 100,\n      margin: {\n        l: 0,\n        r: 0,\n        b: 0,\n        t: 100,\n        pad: 0,\n      },\n      scene: {\n        yaxis: {\n          title: \"Relative Humidity\",\n          titlefont: {\n            size: 10,\n            color: \"#7f7f7f\",\n          },\n        },\n        xaxis: {\n          title: \"Altitude (m)\",\n          titlefont: {\n            size: 10,\n            color: \"#7f7f7f\",\n          },\n        },\n        zaxis: {\n          title: axesLabels[varToPlot],\n          titlefont: {\n            size: 10,\n            color: \"#7f7f7f\",\n          },\n        },\n      },\n    };\n    Plotly.newPlot(\"myDiv\", data, layout);\n  }, [varToPlot, Pstar, deltaH]);\n\n  return (\n    <main>\n      <h1>Extension - 3D Graph</h1>\n      <p>\n        As the different variables being calculated in task 3 (pressure,\n        temperature...) are affected by both relative humidity and altitude, I\n        thought a 3d surface would be a nice visualisation.\n      </p>\n      <p>\n        The graph is interactive - you can rotate it by dragging with the cursor\n        and resize it by scrolling. You can also change the variable to plot\n        with the dropdown menu below.\n      </p>\n\n      <div className={extensionStyles.dropdown}>\n        <select\n          value={varToPlot}\n          onChangeCapture={(e) => setVarToPlot(e.target.value)}\n        >\n          <option value=\"P\">Pressure</option>\n          <option value=\"T\">Temperature</option>\n          <option value=\"L\">Lapse Rate</option>\n          <option value=\"Tboil\">Boiling Point</option>\n          <option value=\"Tdew\">Dew Point</option>\n        </select>\n      </div>\n\n      <div id=\"myDiv\" style={{ marginBottom: \"3rem\" }}></div>\n    </main>\n  );\n}\n"],"names":["axesLabels","P","T","L","Tboil","Tdew","Extension","React","varToPlot","setVarToPlot","P0","Pstar","Md","g","deltaHv","a","b","zData","U","pressures","deltah","h","Es","Math","exp","r","log","push","x","Array","length","fill","map","_","i","y","text","xi","yi","j","d3","data","z","type","hoverinfo","showlegend","layout","title","font","size","autosize","width","min","window","innerWidth","height","margin","l","t","pad","scene","yaxis","titlefont","color","xaxis","zaxis","Plotly","className","extensionStyles","value","onChangeCapture","e","target","id","style","marginBottom"],"sourceRoot":""}