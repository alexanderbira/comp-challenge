{"version":3,"file":"static/js/347.e1e47c82.chunk.js","mappings":"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","sources":["LineGraph.js","Task2/Task2.js"],"sourcesContent":["import * as d3 from \"d3\";\nimport React from \"react\";\n\n/*\npoints:\n[\n  {\n    \"x\": number\n    \"y\": number\n  },\n]\n\ndata:\n{\n  \"class\": points,\n  \"class2\": points,\n}\n\ncolours:\n{\n    \"class\": colour,\n    \"class2\": colour,\n}\n*/\nexport default function LineGraph(props) {\n  const { margin, w, h, title, xLabel, yLabel } = props;\n  let data = props.data;\n  let colours = props.colours;\n  const animated = props.animated ?? true;\n  const legend = props.legend ?? true;\n\n  if (!legend) {\n    data = { default: data };\n    colours = { default: \"black\" };\n  }\n\n  const parentElement = React.useRef(null);\n\n  const [xName, yName] = Object.keys(data[Object.keys(data)[0]][0]);\n\n  React.useEffect(() => {\n    parentElement.current.innerHTML = \"\";\n\n    // set the dimensions and margins of the graph\n    const width = w - margin.left - margin.right;\n    const height = h - margin.top - margin.bottom;\n    // append the svg object to the body of the page\n    const svg = d3\n      .select(parentElement.current)\n      .append(\"svg\")\n      .attr(\n        \"viewBox\",\n        `0 0 ${width + margin.left + margin.right} ${\n          height + margin.top + margin.bottom\n        }`\n      )\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\n\n    // Add X axis\n    const dataX = Object.values(data)\n      .flat()\n      .map((i) => Object.values(i)[0]);\n    const x = d3\n      .scaleLinear()\n      .domain([Math.min(...dataX), Math.max(...dataX)])\n      .range([0, width]);\n    svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(0, ${height})`)\n      .call(d3.axisBottom(x));\n\n    // Add Y axis\n    const dataY = Object.values(data)\n      .flat()\n      .map((i) => Object.values(i)[1]);\n    const y = d3\n      .scaleLinear()\n      .domain([Math.min(...dataY), Math.max(...dataY)])\n      .range([height, 0]);\n    svg.append(\"g\").call(d3.axisLeft(y));\n\n    // add gridlines\n    svg\n      .append(\"g\")\n      .style(\"opacity\", \"0.15\")\n      .attr(\"transform\", `translate(0, ${height})`)\n      .call(d3.axisBottom(x).tickSize(-height).tickFormat(\"\"));\n    svg\n      .append(\"g\")\n      .style(\"opacity\", \"0.15\")\n      .call(d3.axisLeft(y).tickSize(-width).tickFormat(\"\"));\n\n    if (legend) {\n      const group = svg.append(\"g\");\n\n      const numClasses = Object.keys(data).length;\n      const xScale2 = d3\n        .scaleLinear()\n        .domain([0, numClasses - 1])\n        .range([0, (numClasses - 1) * 40]);\n\n      const xAxis2 = d3\n        .axisLeft(xScale2)\n        .ticks(numClasses)\n        .tickFormat((d) => Object.keys(colours)[d]);\n\n      group\n        .selectAll(\"rect\")\n        .data([...Array(numClasses).keys()])\n        .enter()\n        .append(\"rect\")\n        .attr(\"class\", \"legend-item\")\n        .style(\"fill\", (d) => Object.values(colours)[d])\n        .attr(\"width\", 30)\n        .attr(\"height\", 30)\n        .attr(\"y\", (d, i) => i * 40 + 10)\n        .attr(\"x\", width + margin.right - 30);\n\n      group\n        .append(\"g\")\n        .call(xAxis2)\n        .attr(\"transform\", `translate(${width + margin.right - 30}, 25)`);\n\n      group._groups[0][0].lastChild.firstChild.style.opacity = \"0\";\n    }\n\n    const lineGenerator = d3\n      .line()\n      .x((d) => x(d[xName]))\n      .y((d) => y(d[yName]));\n\n    if (animated) {\n      Object.keys(colours).forEach((key) => {\n        svg\n          .append(\"path\")\n          .attr(\"class\", \"line\")\n          .datum(data[key])\n          .style(\"stroke\", colours[key])\n          .attr(\"stroke-width\", 3)\n          .style(\"fill\", \"none\")\n          .attr(\n            \"d\",\n            d3\n              .line()\n              .x((d) => 0)\n              .y((d) => height)\n          );\n      });\n\n      // Animation\n      svg\n        .selectAll(\".line\")\n        .transition()\n        .duration(800)\n        .delay(function (d, i) {\n          return i * 100;\n        })\n        .attr(\"d\", lineGenerator);\n    } else {\n      Object.keys(colours).forEach((key) => {\n        svg\n          .append(\"path\")\n          .attr(\"class\", \"line\")\n          .datum(data[key])\n          .style(\"stroke\", colours[key])\n          .attr(\"stroke-width\", 3)\n          .style(\"fill\", \"none\")\n          .attr(\"d\", lineGenerator);\n      });\n    }\n\n    // Title\n    svg\n      .append(\"text\")\n      .attr(\"x\", width / 2)\n      .attr(\"y\", 0 - margin.top / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"1.2rem\")\n      .style(\"text-decoration\", \"underline\")\n      .text(title);\n\n    // Text label for the x axis\n    svg\n      .append(\"text\")\n      .style(\"font-size\", \"0.85rem\")\n      .attr(\n        \"transform\",\n        \"translate(\" + width / 2 + \" ,\" + (height + margin.top + 20) + \")\"\n      )\n      .style(\"text-anchor\", \"middle\")\n      .text(xLabel);\n\n    // Text label for the y axis\n    svg\n      .append(\"text\")\n      .style(\"font-size\", \"0.85rem\")\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"y\", 0 - margin.left)\n      .attr(\"x\", 0 - height / 2)\n      .attr(\"dy\", \"1em\")\n      .style(\"text-anchor\", \"middle\")\n      .text(yLabel);\n  }, [\n    data,\n    margin,\n    w,\n    h,\n    title,\n    xLabel,\n    yLabel,\n    colours,\n    xName,\n    yName,\n    animated,\n    legend,\n  ]);\n\n  return <div ref={parentElement}></div>;\n}\n","import React from \"react\";\nimport LineGraph from \"../LineGraph.js\";\nimport { MathComponent } from \"mathjax-react\";\n\nexport default function Task2() {\n  const R = 8.314;\n  const M = 0.02896;\n  const g = 9.81;\n\n  const T0 = 273 + 15;\n  const P0 = 101_325;\n\n  const lapseRateData = [\n    [0, -6.5],\n    [11, 0],\n    [20, 1],\n    [32, 2.8],\n    [47, 0],\n    [51, -2.8],\n    [71, -2],\n    [85, 0],\n  ].map((i) => [i[0] * 1000, i[1] / 1000]); //convert to metres\n\n  const isothermal = (p0, t0, h, h0) =>\n    p0 * Math.E ** ((-(M * g) / (R * t0)) * (h - h0));\n\n  const lapsed = (p0, l, h, h0, t0) =>\n    p0 * (1 - (l * (h - h0)) / t0) ** ((M * g) / (l * R));\n\n  const startTemps = [T0];\n  const startPressures = [P0];\n\n  const pressureAgainstAltitude = [];\n\n  const interval = 1000; //metres, must be a factor of 1000\n  const layerStarts = lapseRateData.map((i) => i[0]); //the starting altitude for each layer (m)\n  for (let h = 0; h <= 85_000; h += interval) {\n    //define the lapse rate index\n    //only use the next lapse rate if h is greater than the starting altitude for that lapse rate\n    const lapseRateIndex =\n      layerStarts.findIndex((i) => h > i) === -1\n        ? 0\n        : layerStarts.findIndex((i) => h > i);\n    const l = lapseRateData[lapseRateIndex][1];\n    const h0 = lapseRateData[lapseRateIndex][0];\n    const t0 = startTemps[lapseRateIndex];\n    const p0 = startPressures[lapseRateIndex];\n\n    //use the pressure-getting functions and append the next pressure-altitude point\n    let pressure;\n    if (l === 0) {\n      pressure = isothermal(p0, t0, h, h0);\n    } else {\n      pressure = lapsed(p0, l, h, h0, t0);\n    }\n    pressureAgainstAltitude.push({\n      altitude: h,\n      pressure,\n    });\n\n    //if h is in layerStarts, add the current pressure as the next start pressure of layerStarts[index + 1]\n    //T = t0 - L( h - h0 ) and add it to start temps, only do this if h is in layerStarts\n    if (layerStarts.findIndex((i) => h > i) !== -1) {\n      const t = t0 - l * (h - h0);\n      startTemps.push(t);\n      startPressures.push(pressure);\n    }\n  }\n\n  const layersData = {\n    troposphere: pressureAgainstAltitude.filter((d) => d.altitude <= 11000),\n    tropopause: pressureAgainstAltitude.filter(\n      (d) => d.altitude >= 11000 && d.altitude <= 20000\n    ),\n    stratosphere: pressureAgainstAltitude.filter(\n      (d) => d.altitude >= 20000 && d.altitude <= 47000\n    ),\n    stratopause: pressureAgainstAltitude.filter(\n      (d) => d.altitude >= 47000 && d.altitude <= 51000\n    ),\n    mesosphere: pressureAgainstAltitude.filter((d) => d.altitude >= 51000),\n  };\n\n  const layersColours = {\n    troposphere: \"red\",\n    tropopause: \"orange\",\n    stratosphere: \"green\",\n    stratopause: \"blue\",\n    mesosphere: \"purple\",\n  };\n\n  return (\n    <main>\n      <h1>Task 2</h1>\n      <p>\n        The graph below was created using an iterative method with a 1km\n        interval. It was assumed that the atmosphere is an ideal gas, the air is\n        dry, gravity is constant, and the lapse rate between layers of the\n        atmosphere is constant.\n      </p>\n      <LineGraph\n        data={layersData}\n        margin={{ top: 30, right: 100, bottom: 60, left: 60 }}\n        w={500}\n        h={300}\n        title={\"Atmospheric Pressure vs Altitude\"}\n        colours={layersColours}\n        xLabel={\"Altitude (m)\"}\n        yLabel={\"Pressure (Pa)\"}\n      />\n\n      <h2 style={{ textAlign: \"center\" }}>Method</h2>\n      <p>\n        L ≠ 0:\n        <br />\n        <MathComponent\n          tex={String.raw`P = P_0\\Biggl(1-\\frac{L(h-h_0)}{T_0}\\Biggr)^{\\frac{Mg}{LR}}`}\n        />\n      </p>\n      <p>\n        L = 0:\n        <br />\n        <MathComponent tex={String.raw`P = P_0e^{-\\frac{Mg}{RT_0}(h-h_0)}`} />\n      </p>\n    </main>\n  );\n}\n"],"names":["LineGraph","props","margin","w","h","title","xLabel","yLabel","data","colours","animated","legend","default","parentElement","React","Object","keys","xName","yName","current","innerHTML","width","left","right","height","top","bottom","svg","d3","append","attr","dataX","values","flat","map","i","x","domain","Math","min","max","range","call","dataY","y","style","tickSize","tickFormat","group","numClasses","length","xScale2","xAxis2","ticks","d","selectAll","Array","enter","_groups","lastChild","firstChild","opacity","lineGenerator","forEach","key","datum","transition","duration","delay","text","ref","Task2","M","lapseRateData","startTemps","startPressures","pressureAgainstAltitude","layerStarts","lapseRateIndex","findIndex","l","h0","t0","p0","pressure","E","isothermal","lapsed","push","altitude","t","layersData","troposphere","filter","tropopause","stratosphere","stratopause","mesosphere","textAlign","tex","String","raw"],"sourceRoot":""}